<!DOCTYPE html>
<head>
<title>管理员后台管理</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- bootstrap-css -->
<link rel="stylesheet" href="css/bootstrap.min.css" >
<!-- //bootstrap-css -->
<!-- Custom CSS -->
<link href="css/style.css" rel='stylesheet' type='text/css' />
<link href="css/style-responsive.css" rel="stylesheet"/>
<!-- font CSS -->
<link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<!-- font-awesome icons -->
<link rel="stylesheet" href="css/font.css" type="text/css"/>
<link href="css/font-awesome.css" rel="stylesheet"> 
<!-- //font-awesome icons -->
<script src="js/jquery2.0.3.min.js"></script>
<script src="js/task.js"></script>
<script src="laydate/laydate.js"></script>
<script src="layer/layer.js"></script>
</head>
<body>
<section id="container">
<!--header start-->
<header class="header fixed-top clearfix">
<!--logo start-->
<div class="brand">
    <a href="index.html" class="logo">
        超级管理员
    </a>
    <div class="sidebar-toggle-box">
        <div class="fa fa-bars"></div>
    </div>
</div>
<!--logo end-->
<div class="nav notify-row" id="top_menu">
	当前时间：
	<div id="time" style="display: inline-block;margin-right: 40px;"></div>
	<script type="text/javascript">
		function time(){
			var vWeek,vWeek_s,vDay;
			vWeek = ["星期天","星期一","星期二","星期三","星期四","星期五","星期六"];
			var date =  new Date();
			year = date.getFullYear();
			month = date.getMonth() + 1;
			day = date.getDate();
			hours = date.getHours();
			minutes = date.getMinutes();
			seconds = date.getSeconds();
			vWeek_s = date.getDay();
			document.getElementById("time").innerHTML = year + "年" + month + "月" + day + "日" + "\t" + hours + ":" + minutes +":" + seconds + "\t" + vWeek[vWeek_s] ;
		};
		setInterval("time()",1000);
	</script>
	<iframe width="430" scrolling="no" height="18" frameborder="0" allowtransparency="true" src="//i.tianqi.com/index.php?c=code&id=1&icon=1&wind=1&num=2&site=12"></iframe>
</div>
<div class="top-nav clearfix">
    <!--搜索和管理员信息-->
    <ul class="nav pull-right top-menu">
        <!-- 管理员登录开始-->
        <li class="dropdown">
            <a class="dropdown-toggle" href="login.html" style="width: 100px;">
                <img alt="" src="images/2.png">
                <span class="username" style="margin-left: 9px;">退出	</span>
            </a>
        </li>
        <!-- 管理员登录结束 -->
    </ul>
</div>
</header>
<!--header end-->
<!--sidebar start-->
<aside>
    <div id="sidebar" class="nav-collapse">
        <!-- 侧边菜单栏开始-->
        <div class="leftside-navigation">
            <ul class="sidebar-menu" id="nav-accordion">
                <li>
                    <a href="index.html">
                        <i class="fa fa-dashboard"></i>
                        <span>仪表板</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;">
                        <i class="fa fa-tasks"></i>
                        <span>任务管理</span>
                    </a>
										<ul class="sub">
												<li><a href="newTask.html">新建任务</a></li>
												<li><a href="task.html">查看任务</a></li>
										</ul>
                </li>
								<li class="sub-menu">
										<a href="student.html">
												<i class="fa fa-users"></i>
												<span>学员管理</span>
										</a>
								</li>
								<li class="sub-menu">
										<a href="coach.html">
												<i class="fa fa-users"></i>
												<span>教练管理</span>
										</a>
								</li>
								<li class="sub-menu">
										<a href="aiticle.html">
												<i class="fa fa-file"></i>
												<span>文章管理</span>
										</a>
								</li>
								<li class="sub-menu">
										<a href="feedback.html">
												<i class="fa fa-pencil-square"></i>
												<span>举报管理</span>
										</a>
								</li>
            </ul>            </div>
        <!-- 侧边菜单栏结束-->
    </div>
</aside>
<!--sidebar end-->
<!--main content start-->
<section id="main-content">
	<section class=" wrapper">
		<div class="table-agile-info" style="display: ;">
			<div class="panel-heading">
				新建任务
				&nbsp;<a href="javascript:void(0)" onclick="javascript:window.location.href='task.html'"><i class="glyphicon glyphicon-share-alt" title="跳转到任务管理界面"></i></a>
			</div>
		  <div class="panel panel-default">
				<table class="table table-striped b-t b-light table2">
					<tr>
						<td width="120px">
							任务编号
							<span id="number_exist" style="display: none;"><i class="glyphicon glyphicon-ok-sign" style="color: limegreen;"></i></span>
							<span id="number_empty" style="display: none;"><i class="glyphicon glyphicon-remove-sign" style="color: red;"></i></span>
						</td>
						<td>
							PM &nbsp; - &nbsp;<input id="number" type="text" maxlength="3" onfocus="hidenText()" style="display: inline-block;width: 100px;" class="input-sm form-control" value="">
							<a href="javascript:void(0)" onclick="numberIsExist('0')">检测编号是否重复?</a>
							<span id="isornot"></span>
							<input id="nnn" style="display: none;">
						</td>
					</tr>
					<tr>
						<td>
							任务名称
							<span id="name_exist" style="display: none;"><i class="glyphicon glyphicon-ok-sign" style="color: limegreen;"></i></span>
							<span id="name_empty" style="display: none;"><i class="glyphicon glyphicon-remove-sign" style="color: red;"></i></span>
						</td>
						<td>
							<span class="text-ellipsis">
								<input id="t_name" type="text" maxlength="8" style="display: inline-block;width: 400px;" class="input-sm form-control" value="">
								<div style="float: right;">您最多可以输入8个文字</div>
							</span>
						</td>
					</tr>
					<tr>
						<td>任务分类
							<span id="type_exist" style="display: none;"><i class="glyphicon glyphicon-ok-sign" style="color: limegreen;"></i></span>
							<span id="type_empty" style="display: none;"><i class="glyphicon glyphicon-remove-sign" style="color: red;"></i></span>
						</td>
						<td>
							<span class="text-ellipsis">
								<select id="s_type" class="input-sm form-control w-sm inline v-middle">
									
								</select>
								&nbsp;<a href="javascript:void(0)" onclick="refreshType()"><i class="glyphicon glyphicon-refresh" title="添加新分类后如果没有显示,请手动点击此处刷新"></i></a>
								&nbsp;<a href="javascript:void(0)" data-toggle="modal" data-target="#newtype" title="如果没有合适的分类,请点击此处添加新分类"><i class="glyphicon glyphicon-plus"></i></a>
								<!-- 添加新分类开始 -->
								<div class="modal fade" id="newtype" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
										<div class="modal-dialog">
												<div class="modal-content">
														<div class="modal-header">
																<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																<h4 class="modal-title" id="myModalLabel">添加新分类</h4>
														</div>
														<div id="body" class="modal-body">
															<table class="table table-striped b-t b-light table2">
																<tr>
																	<td width="120px">分类名称</td>
																	<td><input type="text" id="type" class="input-sm form-control" maxlength="8" value=""></td>
																	<td><div style="float: right;">不得超过8个文字</div></td>
																</tr>
															</table>
														</div>
														<div class="modal-footer">
																<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
																<button type="button" class="btn btn-primary" onclick="addType()">确定</button>
														</div>
												</div>
										</div>
								</div>
								<!-- 添加新分类结束 -->
							</span>
						</td>
					</tr>
					<tr>
						<td>任务时间
							<span id="date_exist" style="display: none;"><i class="glyphicon glyphicon-ok-sign" style="color: limegreen;"></i></span>
							<span id="date_empty" style="display: none;"><i class="glyphicon glyphicon-remove-sign" style="color: red;"></i></span>
						</td>
						<td>
							<span class="text-ellipsis">
								<div class="input-group input-daterange" style="margin-bottom: 0;">
									<input type="text" class="form-control" style="width: 200px;" placeholder="请选择日期" id="test1">
								</div>
								<div style="float: right;">结束时间不能小于开始时间</div>
								<input type="text" id="date" style="display: none;">
								<input type="text" id="endDate" style="display: none;">
								<script type="text/javascript">
									laydate.render({
										elem: '#test1',
										range: true,
										done:function(value, date, endDate) {
											//{year: 2017, month: 8, date: 18},
											var date1=date.year+"-"+
																(date.month>10?date.month:"0"+date.month)+"-"+
																(date.date>10?date.date:"0"+date.date);
											var date2=endDate.year+"-"+
																(endDate.month>10?endDate.month:"0"+endDate.month)+"-"+
																(endDate.date>10?endDate.date:"0"+endDate.date);
											var d=dateDiff(date1,date2);
											if(d<=9){
												console.log(date1);
												$("#date").val(date1);
												$("#endDate").val(date2);
												$("#lasttime").val(d+1);
											}else{
												layer.msg("单个任务最长时间不能超过9天！");
											}
										}
									});
									function dateDiff(date1, date2){     
										var type1 = typeof date1, type2 = typeof date2;     
										if(type1 == 'string')     
											date1 = stringToTime(date1);     
										else if(date1.getTime)     
											date1 = date1.getTime();     
										if(type2 == 'string')     
											date2 = stringToTime(date2);     
										else if(date2.getTime)     
											date2 = date2.getTime(); 
										return (date2 - date1) / 1000 / 60 / 60 / 24;//除1000是毫秒，不加是秒 
									} 
									//字符串转成Time(dateDiff)所需方法 
									function stringToTime(string){     
										var f = string.split(' ', 2);     
										var d = (f[0] ? f[0] : '').split('-', 3);     
										var t = (f[1] ? f[1] : '').split(':', 3);     
										return (new Date(     
										parseInt(d[0], 10) || null,     
										(parseInt(d[1], 10) || 1)-1,     
										parseInt(d[2], 10) || null,     
										parseInt(t[0], 10) || null,    
										parseInt(t[1], 10) || null,     
										parseInt(t[2], 10) || null)).getTime(); 
									}
								</script>  
							</span>
						</td>
					</tr>
					
					<tr>
						<td>持续时间
							<span id="lasttime_exist" style="display: none;"><i class="glyphicon glyphicon-ok-sign" style="color: limegreen;"></i></span>
							<span id="lasttime_empty" style="display: none;"><i class="glyphicon glyphicon-remove-sign" style="color: red;"></i></span>
						</td>
						<td>
							<span class="text-ellipsis">
								<input id="lasttime" type="text" style="width: 60px;display: inline;margin-right: 10px;cursor: not-allowed;" class="input-sm form-control" value="" maxlength="1" readonly="readonly">天
							</span>
							<div style="float: right;">系统自动计算，无需手动输入</div>
						</td>
					</tr>
					<tr>
						<td>任务说明
							<span id="textarea_exist" style="display: none;"><i class="glyphicon glyphicon-ok-sign" style="color: limegreen;"></i></span>
							<span id="textarea_empty" style="display: none;"><i class="glyphicon glyphicon-remove-sign" style="color: red;"></i></span>
						</td>
						<td>
							<textarea id="textarea" maxlength="100" style="resize:none;width: 75%;height: 65px;"></textarea>
							<div style="float: right;">您最多可以输入100个文字</div>
						</td>
					</tr>
				</table>
			</div>
			<footer class="panel-footer">
				<div class="row" align="center">
					<button type="button" class="btn btn-sm btn-default" onclick="reset()" style="width: 100px;height: 36px;">重置</button>
					<button type="button" class="btn btn-sm btn-default" onclick="addTask()" style="width: 100px;height: 36px;">提交</button>
				</div>
			</footer>
		</div>
 <!-- footer -->
		  <div class="footer">
			<div class="wthree-copyright">
				<p>&copy;copyright 2018-2019. HuaXiaTangMen. All Rights Reserved. <span>|</span>
			<a target="_blank" href="http://www.miitbeian.gov.cn/" rel="nofollow"> 华ICP证000001号</a></p>
			</div>
		  </div>
  <!-- / footer -->
	</section>

<!--main content end-->
</section>
<script src="js/bootstrap.js"></script>
<script src="js/jquery.dcjqaccordion.2.7.js"></script>
<script src="js/scripts.js"></script>
<script src="js/jquery.slimscroll.js"></script>
<script src="js/jquery.nicescroll.js"></script>
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/flot-chart/excanvas.min.js"></script><![endif]-->
<script src="js/jquery.scrollTo.js"></script>
</body>
</html>
